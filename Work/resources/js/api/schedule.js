//? Документация к api ------------------------

//! Описание
// Api для работы с учебным расписанием групп

//! Таблицы базы данных
//

//! Метод 
/**
 * 
 */

//! Метод 
/**
 * 
 */

import axios from 'axios'
import withSnackbar from "@/js/components/mixins/withSnackbar";

export default {
    mixins: [withSnackbar],
    //*----------------------------------------
    //!         Модель данных
    //*----------------------------------------
    /**
     * id - BIGINT
     * type - JSON - not null
     * group_id - int - not null - FK
     */
    //*----------------------------------------



    //*----------------------------------------
    //!         Получение данных
    //*----------------------------------------
    //*Получение учебного расписания для группы
    //! Комментарий ---------------------------
    //? Реализуется получение данных из таблицы *SCHEDULES* (Расписание)
    //? Возвращается расписание по id группы
    //! Требование ----------------------------
    //! Отсутсвуют
    //!----------------------------------------
    getScheduleByGroupId(group_id) {
        axios.get('/api/getters/schedule_by_group_id/' + group_id)
        .then(res => {return res.data.schedule;})
        .catch(ex => {this.showError("Произошла ошибка" + ex);});
    },

    //*Получение учебного расписания для группы
    //! Комментарий ---------------------------
    //? Реализуется получение данных из таблицы *SCHEDULES* (Расписание)
    //? Возвращается расписание по id группы ДЛЯ РЕДАКТИРОВАНИЯ
    //! Требование ----------------------------
    //! А нужно ли, если есть метод выше?
    //!----------------------------------------
    getScheduleBildByGroupId(group_id) {
        axios.get('/api/getters/schedule_bild_by_group_id/' + group_id)
        .then(res => {return res.data.schedule;})
        .catch(ex => {this.showError("Произошла ошибка" + ex);});
    },

    //*----------------------------------------
    //!         Работа с данными
    //*----------------------------------------
    //*Редактирование учебного расписания
    //! Комментарий ---------------------------
    //? Реализуется сохранения измененных данных в таблице *SCHEDULES* (Расписание)
    //! Требование ----------------------------
    //! Отсутсвуют 
    //!----------------------------------------
    editSchedule(data) {
        return axios.post('/api/edit/schedule/' + data.group_id, {"schedule": data.schedule})
        .then(res => {this.showMessage('Расписание сохранено!');return true;})
        .catch(ex => {this.showError('Произошла ошибка: ' + ex);return false;});
    }
}
